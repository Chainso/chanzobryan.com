{% if site.features.contact_form_enabled %}
<form action="https://api.web3forms.com/submit" method="POST" class="contact-form" id="contact-form">
  <input type="hidden" name="access_key" value="{{ site.web3forms.access_key }}">
  <input type="hidden" name="subject" value="New Contact Form Submission from chanzobryan.com">
  <input type="hidden" name="redirect" value="{{ site.url }}/contact?success=true">
  <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

  <div class="form-group">
    <label for="name">Name <span class="required">*</span></label>
    <input type="text" id="name" name="name" required placeholder="Your name">
  </div>

  <div class="form-group">
    <label for="email">Email <span class="required">*</span></label>
    <input type="email" id="email" name="email" required placeholder="your.email@example.com">
  </div>

  <div class="form-group">
    <label for="subject-field">Subject</label>
    <input type="text" id="subject-field" name="subject-field" placeholder="What's this about?">
  </div>

  <div class="form-group">
    <label for="message">Message <span class="required">*</span></label>
    <textarea id="message" name="message" required rows="6" placeholder="Your message..."></textarea>
  </div>

  <button type="submit" class="btn btn-primary">Send Message</button>
</form>

<div id="form-success" class="form-message success" style="display: none;">
  <h3>Thank you!</h3>
  <p>Your message has been sent successfully. I'll get back to you soon.</p>
</div>

<div id="form-error" class="form-message error" style="display: none;">
  <h3>Oops!</h3>
  <p>Something went wrong. Please try again or reach out via <a href="mailto:chanzo.bryan@gmail.com">email</a>.</p>
</div>

<script>
  // Check for success parameter in URL
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('success') === 'true') {
    document.getElementById('contact-form').style.display = 'none';
    document.getElementById('form-success').style.display = 'block';
  }

  // Handle form submission with async
  const form = document.getElementById('contact-form');
  form.addEventListener('submit', async function(e) {
    const submitBtn = form.querySelector('button[type="submit"]');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
  });
</script>
{% else %}
<div class="contact-disabled">
  <p>Contact form is currently disabled. Please reach out via <a href="mailto:chanzo.bryan@gmail.com">email</a>.</p>
</div>
{% endif %}
